(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(10),a=n.n(r),s=n(2),i=n.n(s),o=n(4),l=n(3),u=(n(17),n(5)),d=n(11),j=n(0),b=["children"],h=function(e){var t=e.children,n=Object(d.a)(e,b);return Object(j.jsx)("button",Object(u.a)(Object(u.a)({},n),{},{className:"btn btn-primary",children:t}))},p=function(e){var t=e.posts,n=e.remove,c=e.edit;return Object(j.jsxs)("table",{className:"table table-striped",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"Title"}),Object(j.jsx)("th",{scope:"col",children:"Link"}),Object(j.jsx)("th",{scope:"col",children:"Created by"}),Object(j.jsx)("th",{scope:"col",children:"Category"}),Object(j.jsx)("th",{scope:"col",children:"Action"})]})}),Object(j.jsx)("tbody",{children:t.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:e.title}),Object(j.jsx)("th",{scope:"col",children:Object(j.jsx)("a",{href:"/posts/".concat(e.id),children:"link"})}),Object(j.jsx)("th",{scope:"col",children:e.user}),Object(j.jsx)("th",{scope:"col",children:e.category}),Object(j.jsxs)("th",{scope:"col",children:[Object(j.jsx)(h,{onClick:function(){return n(e)},children:"Delete"})," ",Object(j.jsx)(h,{onClick:function(){return c(e)},children:"Edit"})]})]},e.id)}))})]})},f=n(6),O=n(7),m=function(){function e(){Object(f.a)(this,e)}return Object(O.a)(e,null,[{key:"getPage",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,c,r,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:14,n=a.length>1&&void 0!==a[1]?a[1]:1,c={headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}},e.next=5,fetch("/json/posts?limit="+t+"&page="+n,c);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deletePost",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/admin/posts/".concat(t,"/delete"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"savePost",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/newadmin/posts/".concat(t.id,"/edit"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),x=function(e,t){return Math.ceil(e/t)},v=function(e){var t=e.totalPages,n=e.page,c=e.changePage,r=function(e){for(var t=[],n=1;n<e+1;n++)t.push(n);return t}(t);return Object(j.jsx)("div",{className:"d-flex justify-content-center",children:Object(j.jsx)("nav",{children:Object(j.jsx)("ul",{className:"pagination",children:r.map((function(e){return Object(j.jsx)("li",{onClick:function(){return c(e)},className:e===n?"page-item active":"page-item",children:Object(j.jsx)("button",{className:"page-link",href:"",children:e})},e)}))})})})},g=function(e){var t=e.setCurrentMode;return Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){return t("posts")},className:"btn btn-outline-secondary btn-lg w-100",children:"Posts"}),Object(j.jsx)("button",{onClick:function(){return t("users")},className:"btn btn-outline-secondary btn-lg w-100",children:"Users"})]})},w=function(e){var t=e.users,n=e.remove,c=e.edit;return Object(j.jsxs)("table",{className:"table table-striped",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"Id"}),Object(j.jsx)("th",{scope:"col",children:"Username"}),Object(j.jsx)("th",{scope:"col",children:"Email"}),Object(j.jsx)("th",{scope:"col",children:"Role"}),Object(j.jsx)("th",{scope:"col",children:"Action"})]})}),Object(j.jsx)("tbody",{children:t.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:e.id}),Object(j.jsx)("th",{scope:"col",children:e.name}),Object(j.jsx)("th",{scope:"col",children:e.email}),Object(j.jsx)("th",{scope:"col",children:e.role}),Object(j.jsxs)("th",{scope:"col",children:[Object(j.jsx)(h,{onClick:function(){return n(e)},children:"Delete"})," ",Object(j.jsx)(h,{onClick:function(){return c(e)},children:"Edit"})]})]},e.id)}))})]})},y=function(){function e(){Object(f.a)(this,e)}return Object(O.a)(e,null,[{key:"getPage",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,c,r,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:14,n=a.length>1&&void 0!==a[1]?a[1]:1,c={headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}},e.next=5,fetch("/json/users?limit="+t+"&page="+n,c);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/admin/users/".concat(t,"/delete"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveUser",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/newadmin/users/".concat(t.id,"/edit"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),k=n(8),C=n.n(k),N=function(e){var t=e.children,n=e.visible,c=e.setVisible,r=[C.a.adminModal];return n&&r.push(C.a.active),Object(j.jsx)("div",{className:r.join(" "),onClick:function(){return c(!1)},children:Object(j.jsx)("div",{className:C.a.adminModalContent,onClick:function(e){return e.stopPropagation()},children:t})})},P=function(e){var t=e.post,n=e.save,r=e.setVisible,a=Object(c.useState)(""),s=Object(l.a)(a,2),i=s[0],o=s[1],d=Object(c.useState)(""),b=Object(l.a)(d,2),h=b[0],p=b[1],f=Object(c.useState)(""),O=Object(l.a)(f,2),m=O[0],x=O[1];Object(c.useEffect)((function(){o(t.text),p(t.title),x(t.category)}),[t]);return Object(j.jsxs)("form",{className:"form-floating pt-3",action:"/submit",method:"POST",encType:"multipart/form-data",children:[Object(j.jsxs)("select",{className:"form-select mb-1",onChange:function(e){return x(e.target.value)},form:"",required:!0,children:[Object(j.jsx)("option",{disabled:!0,selected:!0,value:"-1",children:"Category"}),Object(j.jsx)("option",{value:"news",children:"News"}),Object(j.jsx)("option",{value:"memes",children:"Memes"})]}),Object(j.jsxs)("div",{className:"form-floating mb-1",children:[Object(j.jsx)("input",{type:"text",className:"form-control border fw-bold",placeholder:"Title",name:"title",value:h,onChange:function(e){return p(e.target.value)},required:!0}),Object(j.jsx)("label",{className:"text-muted fw-bold",htmlFor:"postTitle",children:"Edit title"})]}),Object(j.jsx)("div",{className:"mb-3",children:Object(j.jsx)("textarea",{className:"form-control border",placeholder:"Enter text",id:"postText",style:{height:"10rem",resize:"none"},name:"text",value:i,onChange:function(e){return o(e.target.value)}})}),Object(j.jsx)("div",{className:"d-flex",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mb-3",onClick:function(e){e.preventDefault(),n(Object(u.a)(Object(u.a)({},t),{},{title:h,text:i,category:m})),r(!1)},children:"Save"})})]})},S=function(e){var t=e.user,n=e.save,r=e.setVisible,a=Object(c.useState)(""),s=Object(l.a)(a,2),i=s[0],o=s[1];Object(c.useEffect)((function(){o(t.role)}),[t]);return Object(j.jsxs)("form",{children:[Object(j.jsx)("h2",{children:"Choose role"}),Object(j.jsxs)("select",{className:"form-select mb-2",form:"roleFrom",onChange:function(e){return o(e.target.value)},required:!0,children:[Object(j.jsx)("option",{value:"admin",children:"Admin"}),Object(j.jsx)("option",{value:"writer",children:"Writer"})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mb-0",onClick:function(e){e.preventDefault(),n(Object(u.a)(Object(u.a)({},t),{},{role:i})),r(!1)},children:"Save"})]})};var T=function(){var e=Object(c.useState)([{id:1,link:"#",title:"Javascript1",user:"user2",category:"news",text:"it's"},{id:2,link:"#",title:"Javascript2",user:"user3",category:"news",text:"ticking"},{id:3,link:"#",title:"Javascript3",user:"user1",category:"news",text:"away"}]),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([{id:1,name:"Admin",email:"email@email.org",role:"admin"},{id:2,name:"Alan",email:"email@email.org",role:"writer"},{id:3,name:"Turing",email:"email@email.org",role:"reader"}]),s=Object(l.a)(a,2),u=s[0],d=s[1],b=Object(c.useState)(1),h=Object(l.a)(b,2),f=h[0],O=h[1],k=Object(c.useState)(13),C=Object(l.a)(k,2),T=C[0],M=(C[1],Object(c.useState)(10)),A=Object(l.a)(M,2),E=A[0],U=A[1],_=Object(c.useState)("posts"),V=Object(l.a)(_,2),J=V[0],D=V[1],F=Object(c.useState)(!1),q=Object(l.a)(F,2),L=q[0],R=q[1],I=Object(c.useState)({}),z=Object(l.a)(I,2),B=z[0],H=z[1],W=Object(c.useState)({}),Y=Object(l.a)(W,2),G=Y[0],K=Y[1];function Q(){return(Q=Object(o.a)(i.a.mark((function e(){var t,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getPage(T,f);case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,console.log(c),r(c),console.log(n),a=t.headers.get("x-total-count"),U(x(a,T));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(o.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getPage(T,f);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,d(n),c=t.headers.get("x-total-count"),U(x(c,T));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){"posts"===J?function(){Q.apply(this,arguments)}():function(){X.apply(this,arguments)}()}),[f,J]),Object(c.useEffect)((function(){O(1)}),[J]),Object(j.jsxs)("div",{className:"App container-fluid h-100",children:[Object(j.jsxs)("div",{className:"row h-100",children:[Object(j.jsx)("div",{className:"col-1 border-end border-2 px-0 h-100",children:Object(j.jsx)(g,{setCurrentMode:D})}),Object(j.jsxs)("div",{className:"col-11 px-0",children:[" ","posts"===J?Object(j.jsx)(p,{posts:n,remove:function(e){r(n.filter((function(t){return t.id!==e.id}))),m.deletePost(e.id)},edit:function(e){R(!0),H(e)}}):Object(j.jsx)(w,{users:u,remove:function(e){d(u.filter((function(t){return t.id!==e.id}))),y.deleteUser(e.id)},edit:function(e){R(!0),K(e)}}),Object(j.jsx)(v,{totalPages:E,page:f,changePage:function(e){O(e)}})]})]}),Object(j.jsx)(N,{visible:L,setVisible:R,children:"posts"===J?Object(j.jsx)(P,{post:B,save:function(e){r(n.map((function(t){return t.id===e.id?e:t}))),m.savePost(e)},setVisible:R}):Object(j.jsx)(S,{user:G,save:function(e){d(u.map((function(t){return t.id===e.id?e:t}))),y.saveUser(e)},setVisible:R})})]})};a.a.render(Object(j.jsx)(T,{}),document.getElementById("root"))},8:function(e,t,n){e.exports={adminModal:"AdminModal_adminModal__3Htn7",adminModalContent:"AdminModal_adminModalContent__3lPtY",active:"AdminModal_active__2lwig"}}},[[19,1,2]]]);
//# sourceMappingURL=main.fcbb09f4.chunk.js.map